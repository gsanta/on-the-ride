// Generated by CoffeeScript 1.7.1
(function() {
  angular.module("controllers").controller('MapCtrl', function($scope, $http, Map, DataProvider) {
    $scope.routeInfo = void 0;
    $scope.map = void 0;
    $scope.initMap = function() {
      var routeInfoPromise;
      routeInfoPromise = DataProvider.loadRouteInfo();
      return routeInfoPromise.success(function(data) {
        var centerCoordinates, dataItem, _i, _len, _results;
        $scope.routeInfo = data;
        centerCoordinates = Map.createCoordinate(data[0].nodes[0].lat, data[0].nodes[0].lon);
        $scope.map = Map.createMap(centerCoordinates, 12, document.getElementById("googleMap"));
        _results = [];
        for (_i = 0, _len = data.length; _i < _len; _i++) {
          dataItem = data[_i];
          _results.push(Map.addRoute(dataItem.nodes, $scope.map));
        }
        return _results;
      });
    };
    return $scope.infoBoxes = [];
  });

}).call(this);
