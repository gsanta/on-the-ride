// Generated by CoffeeScript 1.7.1
(function() {
  angular.module("controllers").controller('ProfileCtrl', function($scope, DataProvider, LoginService) {
    var promise;
    promise = DataProvider.getUserInfo("gsanta");
    promise.then(function(data) {
      return $scope.user = data;
    });
    $scope.user = {};
    $scope.newPassword = void 0;
    $scope.getCssClasses = function(ngModelContoller) {
      return {
        error: ngModelContoller.$invalid && ngModelContoller.$dirty,
        success: ngModelContoller.$valid && ngModelContoller.$dirty
      };
    };
    $scope.showError = function(ngModelController, error) {
      console.log("shoError: " + ngModelController.$error[error]);
      return ngModelController.$error[error];
    };
    $scope.canSaveForm = function(form) {
      return form.$valid;
    };
    return $scope.submitPasswordChangeForm = function(form) {
      if (form.$dirty && form.$invalid) {
        return;
      }
      return LoginService.changePassword($scope.user.userName, $scope.user.password, form.newPassword.$modelValue);
    };
  });

}).call(this);
